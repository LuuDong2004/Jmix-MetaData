<view xmlns="http://jmix.io/schema/flowui/view"
      title="MinIO Browser"
      focusComponent="filesTable"
      controller="com.company.jmixdatastore.view.minio.MinioView">

    <!-- dataContainer phải ở mức view -->
    <data>
        <collection id="bucketsDc"
                    class="com.company.jmixdatastore.dto.BucketInfo"/>
        <collection id="filesDc"
                    class="com.company.jmixdatastore.dto.ObjectInfo"/>
        <instance id="selectedFileDc"
                  class="com.company.jmixdatastore.dto.ObjectInfo"/>
    </data>

    <layout spacing="true" width="100%" height="100%">
        <hbox width="100%" height="100%" spacing="true">
            <!-- Left: Buckets -->
            <vbox width="30%" height="100%" spacing="true">
                <textField id="newBucketField" label="New bucket" clearButtonVisible="true"/>
                <hbox spacing="true">
                    <button id="createBucketBtn" text="Create bucket"/>
                    <button id="deleteBucketBtn" text="Delete bucket" themeNames="error"/>
                </hbox>
                <dataGrid id="bucketsTable"
                          dataContainer="bucketsDc"
                          width="100%" height="100%">
                    <columns>
                        <column property="name" header="Name"/>
                        <column property="creationDate" header="Created Date"/>
                    </columns>
                </dataGrid>
            </vbox>

            <!-- Center: Files of selected bucket -->
            <vbox width="70%" height="100%" spacing="true">
                <hbox spacing="true">
                    <textField id="prefixField" label="Prefix" clearButtonVisible="true"/>
                    <fileUploadField id="uploadField" storage="memory" autoUpload="true"/>
                    <button id="searchBtn" text="Search"/>
                    <button id="downloadBtn" text="Download"/>
                    <button id="deleteBtn" text="Delete" themeNames="error"/>
                </hbox>
                <dataGrid id="filesTable"
                          dataContainer="filesDc"
                          width="100%" height="100%">
                    <columns>
                        <column property="key" header="File Path"/>
                        <column property="size" header="Size"/>
                        <column property="contentType" header="Type"/>
                        <column property="lastModified" header="Modified"/>
                    </columns>
                </dataGrid>
                <label id="statusLabel"/>
            </vbox>

            <!-- Right: File Details (Hidden by default) -->
            <vbox id="fileDetailPanel" width="30%" height="100%" spacing="true" visible="false">
                <h3 text="File Details" styleNames="text-primary"/>
                <formLayout id="fileDetailForm" dataContainer="selectedFileDc" width="100%">
                    <textField id="detailKey" property="key" label="File Path" readonly="true"/>
                    <textField id="detailSize" property="size" label="Size (bytes)" readonly="true"/>
                    <textField id="detailContentType" property="contentType" label="Content Type" readonly="true"/>
                    <textField id="detailLastModified" property="lastModified" label="Last Modified" readonly="true"/>
                </formLayout>
                
                <vbox spacing="true" width="100%">
                    <label text="File Information" styleNames="text-secondary"/>
                    <textArea id="fileInfoText" width="100%" height="200px" readonly="true"/>
                </vbox>
            </vbox>
        </hbox>
    </layout>
</view>

